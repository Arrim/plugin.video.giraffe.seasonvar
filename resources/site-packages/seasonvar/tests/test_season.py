# coding: utf-8

#
# Copyright Â© 2017 weirdgiraffe <giraffe@cyberzoo.xyz>
#
# Distributed under terms of the MIT license.
#
from __future__ import unicode_literals
import codecs
import os
import pytest
import re
from seasonvar.season import Season


def assetpath(path):
    return os.path.join(os.path.dirname(__file__), 'assets', path)


@pytest.mark.parametrize('url,asset', [
    ('http://seasonvar.ru/serial-13945-Horoshee_mesto.html',
     'serial-13945-Horoshee_mesto.html'),
])
def test_initialisation(url, asset):
    with codecs.open(assetpath(asset), 'r', 'utf-8') as f:
        s = Season(url=url, html=f.read())
        assert re.match(r'[0-9a-f]+', s.secure)
        assert s.thumb is not None
