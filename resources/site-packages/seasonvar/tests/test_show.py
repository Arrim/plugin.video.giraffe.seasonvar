# coding: utf-8

#
# Copyright Â© 2017 weirdgiraffe <giraffe@cyberzoo.xyz>
#
# Distributed under terms of the MIT license.
#
from __future__ import unicode_literals
import codecs
import os
import pytest
from seasonvar.show import Show


def assetpath(path):
    return os.path.join(os.path.dirname(__file__), 'assets', path)


@pytest.mark.parametrize('asset, url, expected_seasons_count', [
    ('serial-14925-Portlandiya-7-season.html',
     'http://seasonvar.ru/serial-14925-Portlandiya-7-season.html',
     7)
])
def test_initialisation(asset, url, expected_seasons_count):
    with codecs.open(assetpath(asset), 'r', 'utf-8') as f:
        s = Show(url=url, html=f.read())
        assert len(s.seasons) == expected_seasons_count
        assert s.current_season is not None
